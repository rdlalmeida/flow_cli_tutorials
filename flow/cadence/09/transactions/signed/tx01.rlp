ID		d6aedfbd7f8574347a6230507c3080477480ae77a16e8374a8b7771c91b1338a
Payer		f8d6e0586b0a20c7
Authorizers	[f8d6e0586b0a20c7 f8d6e0586b0a20c7]

Proposal Key:	
    Address	f8d6e0586b0a20c7
    Index	0
    Sequence	5

No Payload Signatures

No Envelope Signatures


Arguments	No arguments

Code

import ApprovalVoting from 0xf8d6e0586b0a20c7

/*
    This transaction allows the administrator of the Voting contract to create a new ballot and store it in a voter's account
    The voter and the administrator have to both sign the transaction so it can access their storage
*/

transaction() {
    prepare(admin: AuthAccount, voter: AuthAccount) {
        // Borrow a reference to the Admin resource
        let adminRef: &ApprovalVoting.Administrator = admin.borrow<&ApprovalVoting.Administrator>(from: ApprovalVoting.adminStorage) ??
            panic ("Unable to retrieve a valid administrator reference...")

        // Create a new Ballot by calling the issueBallot function to the admin Reference
        let ballot: @ApprovalVoting.Ballot <- adminRef.issueBallot()

        // Store that ballot in the voter's account storage
        voter.save<@ApprovalVoting.Ballot>(<- ballot, to: ApprovalVoting.ballotStorage)

        // Also, create a link to the public storage for verifications purposes (on a PROD application this is highly risky! Do this only
        // for testing purposes)
        voter.link<&ApprovalVoting.Ballot>(ApprovalVoting.ballotPublic, target: ApprovalVoting.ballotStorage)

        log("Ballot transferred to voter!")
    }
}


Payload:
f9053ef90539b904ea696d706f727420417070726f76616c566f74696e672066726f6d203078663864366530353836623061323063370a0a2f2a0a2020202054686973207472616e73616374696f6e20616c6c6f7773207468652061646d696e6973747261746f72206f662074686520566f74696e6720636f6e747261637420746f206372656174652061206e65772062616c6c6f7420616e642073746f726520697420696e206120766f7465722773206163636f756e740a2020202054686520766f74657220616e64207468652061646d696e6973747261746f72206861766520746f20626f7468207369676e20746865207472616e73616374696f6e20736f2069742063616e206163636573732074686569722073746f726167650a2a2f0a0a7472616e73616374696f6e2829207b0a20202020707265706172652861646d696e3a20417574684163636f756e742c20766f7465723a20417574684163636f756e7429207b0a20202020202020202f2f20426f72726f772061207265666572656e636520746f207468652041646d696e207265736f757263650a20202020202020206c65742061646d696e5265663a2026417070726f76616c566f74696e672e41646d696e6973747261746f72203d2061646d696e2e626f72726f773c26417070726f76616c566f74696e672e41646d696e6973747261746f723e2866726f6d3a20417070726f76616c566f74696e672e61646d696e53746f7261676529203f3f0a20202020202020202020202070616e6963202822556e61626c6520746f20726574726965766520612076616c69642061646d696e6973747261746f72207265666572656e63652e2e2e22290a0a20202020202020202f2f204372656174652061206e65772042616c6c6f742062792063616c6c696e672074686520697373756542616c6c6f742066756e6374696f6e20746f207468652061646d696e205265666572656e63650a20202020202020206c65742062616c6c6f743a2040417070726f76616c566f74696e672e42616c6c6f74203c2d2061646d696e5265662e697373756542616c6c6f7428290a0a20202020202020202f2f2053746f726520746861742062616c6c6f7420696e2074686520766f7465722773206163636f756e742073746f726167650a2020202020202020766f7465722e736176653c40417070726f76616c566f74696e672e42616c6c6f743e283c2d2062616c6c6f742c20746f3a20417070726f76616c566f74696e672e62616c6c6f7453746f72616765290a0a20202020202020202f2f20416c736f2c206372656174652061206c696e6b20746f20746865207075626c69632073746f7261676520666f7220766572696669636174696f6e7320707572706f73657320286f6e20612050524f44206170706c69636174696f6e207468697320697320686967686c79207269736b792120446f2074686973206f6e6c790a20202020202020202f2f20666f722074657374696e6720707572706f736573290a2020202020202020766f7465722e6c696e6b3c26417070726f76616c566f74696e672e42616c6c6f743e28417070726f76616c566f74696e672e62616c6c6f745075626c69632c207461726765743a20417070726f76616c566f74696e672e62616c6c6f7453746f72616765290a0a20202020202020206c6f67282242616c6c6f74207472616e7366657272656420746f20766f7465722122290a202020207d0a7dc0a0e40988be82776d5ab12d69cd95f06cbdce14ffcdf513c7bf9d79622e2807047b8203e888f8d6e0586b0a20c7800588f8d6e0586b0a20c7d288f8d6e0586b0a20c788f8d6e0586b0a20c7c0c0